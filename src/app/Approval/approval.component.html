<mat-tab-group>
  <mat-tab label="Permits for Approval">
    <div>
      <!-- Filtering Options -->
      <form [formGroup]="pendingGroup" (submit)="pendingSearch()">
        <mat-form-field>
          <mat-label>Filter by Type</mat-label>
          <select matNativeControl formControlName="type">
            <option value=""></option>
            <option value="hot">Hot</option>
            <option value="cold">Cold</option>
            <option value="confined">Confined Space</option>
          </select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>Filter by Location</mat-label>
          <input matInput placeholder="Locations" formControlName="locations">
        </mat-form-field>

        <button mat-flat-button color="primary" type="submit">Search</button>
      </form>

      <!-- Permits Card -->

      <mat-card class="PTWcard" *ngFor="let permit of (pendingpermits$ | async) as permits">
        <mat-card-header>
          <div mat-card-avatar class="PTWCardheader_div">
            <mat-icon [svgIcon]="permit.type" aria-hidden="false" aria-label="hot_icon" class="PTWcard-icon"></mat-icon>
            <h4 style="text-align: center;">#{{ permit.id }}</h4>
          </div>
          <mat-card-title>
            {{ permit.locations }}
          </mat-card-title>
          <mat-card-subtitle>{{ permit.equipment }}</mat-card-subtitle>
          <mat-card-subtitle matTooltip="{{ permit.startdate | date: 'dd-MMM HH:mm a' }}">
            Start: {{ permit.startdate | date: 'HH:mm a' }}
          </mat-card-subtitle>
          <mat-card-subtitle matTooltip="{{ permit.enddate | date: 'dd-MMM HH:mm a' }}">
            End: {{ permit.enddate | date: 'HH:mm a' }}
          </mat-card-subtitle>

        </mat-card-header>
        <br>
        <mat-card-content>
          <p>
            {{ permit.comment }}
          </p>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" (click)="approved(permit.id)">Approve</button>
          <button mat-button color="primary" (click)="reject(permit.id)">Reject</button>
        </mat-card-actions>
      </mat-card>
    </div>
    <div>
      <form>
        <mat-accordion>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Plant Isolation Requirements
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="form-container">
              <div class="form-row">
                <tr><mat-label class="form-title">Fire Form Number:</mat-label>
                </tr>
                <tr><mat-form-field class="form-field">
                    <input matInput placeholder="Leave Blank if NA" name="isolationFireAlarmSystem" size="45">
                  </mat-form-field></tr>
              </div>

              <div class="form-row">
                <tr><mat-label class="form-title">Mech Form Number:</mat-label>
                </tr>
                <tr><mat-form-field class="form-field">
                    <input matInput placeholder="Leave Blank if NA" name="isolationMechanical" size="45">
                  </mat-form-field></tr>
              </div>

              <div class="form-row">
                <tr><mat-label class="form-title">Electrical Form Number:</mat-label>
                </tr>
                <tr><mat-form-field class="form-field">
                    <input matInput placeholder="Leave Blank if NA" name="isolationElectrical" size="45">
                  </mat-form-field></tr>
              </div>
            </div>
          </mat-expansion-panel>

          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Equipment, Systems and Work Area Status
              </mat-panel-title>
            </mat-expansion-panel-header>
            <ng-container *ngFor="let work_area of work_area_list">
              <mat-checkbox [name]="work_area.name">{{ work_area.label }}</mat-checkbox>
            </ng-container>
            
          </mat-expansion-panel>

          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Personal Protective Equipments (PPE)
              </mat-panel-title>
            </mat-expansion-panel-header>
            <ng-container *ngFor="let ppe of PPE_list">
              <mat-checkbox [name]="ppe.name">{{ ppe.label }}</mat-checkbox>
            </ng-container>
          </mat-expansion-panel>

          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Precautions (Before and During Work)
              </mat-panel-title>
            </mat-expansion-panel-header>
            <ng-container *ngFor="let precaution_list of precaution_list">
              <mat-checkbox [name]="precaution_list.name">{{ precaution_list.label }}</mat-checkbox>
            </ng-container>
          </mat-expansion-panel>
        </mat-accordion>
      </form>

    </div>
  </mat-tab>